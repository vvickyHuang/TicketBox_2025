{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/iris/Desktop/1117/TicketBox_2025/frontend/src/components/CountdownTimer/index.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nexport default function CountdownTimer({ onTimeChange }) {\r\n  const [secondsLeft, setSecondsLeft] = useState(300); // 5 分鐘倒數\r\n\r\n  useEffect(() => {\r\n    if (secondsLeft <= 0) {\r\n      if (onTimeChange) onTimeChange('00:00'); // 倒數結束\r\n      return;\r\n    }\r\n\r\n    const interval = setInterval(() => {\r\n      setSecondsLeft((prev) => prev - 1);\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [secondsLeft, onTimeChange]);\r\n\r\n  const minutes = Math.floor(secondsLeft / 60);\r\n  const seconds = secondsLeft % 60;\r\n\r\n  const formattedTime = `${minutes.toString().padStart(2, '0')}:${seconds\r\n    .toString()\r\n    .padStart(2, '0')}`;\r\n\r\n  // 每秒回傳給父元件\r\n  useEffect(() => {\r\n    if (onTimeChange) onTimeChange(formattedTime);\r\n  }, [formattedTime, onTimeChange]);\r\n\r\n  return (\r\n    <Typography variant='body1' sx={{ fontWeight: 700, color: '#ff4d4f' }}>\r\n      剩餘時間: {formattedTime}\r\n    </Typography>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS,eAAe,EAAE,YAAY,EAAE;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC,MAAM,SAAS;IAE9D,IAAA,kNAAS,EAAC;QACR,IAAI,eAAe,GAAG;YACpB,IAAI,cAAc,aAAa,UAAU,OAAO;YAChD;QACF;QAEA,MAAM,WAAW,YAAY;YAC3B,eAAe,CAAC,OAAS,OAAO;QAClC,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAa;KAAa;IAE9B,MAAM,UAAU,KAAK,KAAK,CAAC,cAAc;IACzC,MAAM,UAAU,cAAc;IAE9B,MAAM,gBAAgB,GAAG,QAAQ,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,QAC7D,QAAQ,GACR,QAAQ,CAAC,GAAG,MAAM;IAErB,WAAW;IACX,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc,aAAa;IACjC,GAAG;QAAC;QAAe;KAAa;IAEhC,qBACE,8OAAC,+KAAU;QAAC,SAAQ;QAAQ,IAAI;YAAE,YAAY;YAAK,OAAO;QAAU;;YAAG;YAC9D;;;;;;;AAGb","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/iris/Desktop/1117/TicketBox_2025/frontend/src/components/TestQR/index.jsx"],"sourcesContent":["import { Dialog, DialogContent, Typography, Box, Button, IconButton } from '@mui/material';\r\nimport WarningAmberIcon from '@mui/icons-material/WarningAmber';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport { useEffect, useState } from 'react';\r\nimport { LuArrowLeft, LuArrowRight } from 'react-icons/lu';\r\nimport { useIsMobile } from '@/hook/useIsMobile';\r\nimport CountdownTimer from '@/components/CountdownTimer';\r\n\r\nexport default function TicketQRCodeDialog({ oriTicketList, handleSearch }) {\r\n  const isMobile = useIsMobile();\r\n\r\n  const [activeTicket, setActiveTicket] = useState(0);\r\n  const [time, setTime] = useState('');\r\n  const [ticketVcList, setTicketVcList] = useState(oriTicketList);\r\n  console.log('oriTicketList', oriTicketList);\r\n  useEffect(() => {\r\n    setTicketVcList(oriTicketList);\r\n  }, [oriTicketList]);\r\n  console.log('oriTicketList', ticketVcList);\r\n\r\n  const handlePrev = () => setActiveTicket((prev) => Math.max(prev - 1, 0));\r\n  const handleNext = () => setActiveTicket((prev) => Math.min(prev + 1, ticketVcList.length - 1));\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const results = await Promise.all(\r\n          ticketVcList.map(async (ticket) => {\r\n            // 如果已經掃描過，就不再查 API\r\n            if (ticket.isScanned) return ticket;\r\n            // console.log(ticket.vcBindToken);\r\n            const res = await fetch(`/api/concert/checkStatus?id=${ticket.vcBindToken}`);\r\n            const data = await res.json();\r\n            console.log('checkStatus data', data.message);\r\n            return {\r\n              ...ticket,\r\n              isScanned: data.message === 'VC 綁定完成',\r\n            };\r\n          })\r\n        );\r\n\r\n        setTicketVcList(results);\r\n        handleSearch?.();\r\n      } catch (err) {\r\n        console.error('票券檢查失敗', err);\r\n      }\r\n    }, 5000); // 每 5 秒檢查一次，可以調整\r\n\r\n    return () => clearInterval(interval); // 組件卸載時清除計時器\r\n  }, [ticketVcList]);\r\n  const [tourOpen, setTourOpen] = useState(false);\r\n\r\n  return isMobile ? (\r\n    <>\r\n      <DialogContent sx={{ textAlign: 'center' }}>\r\n        <Typography variant='h6' fontWeight={700} sx={{ mb: 1 }}>\r\n          您的票券已準備好！\r\n        </Typography>\r\n\r\n        <Typography variant='body2' sx={{ color: '#555', mb: 1 }}>\r\n          請點選連接將票券加入數位憑證皮夾 App，完成綁定\r\n        </Typography>\r\n\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            bgcolor: time === '00:00' ? '#fff1f0' : '#fff8e1',\r\n            color: time === '00:00' ? '#ff4d4f' : '#b26a00',\r\n            borderRadius: 2,\r\n            p: 1,\r\n            mb: 2,\r\n          }}\r\n        >\r\n          {time === '00:00' ? <ErrorIcon sx={{ mr: 1 }} /> : <WarningAmberIcon sx={{ mr: 1 }} />}\r\n          <Typography variant='body2' fontWeight={600}>\r\n            {time === '00:00'\r\n              ? '您未在 5 分鐘內完成綁定，連結已失效。'\r\n              : '請於 5 分鐘內完成綁定，否則連結將失效。'}\r\n          </Typography>\r\n        </Box>\r\n\r\n        <CountdownTimer onTimeChange={setTime}></CountdownTimer>\r\n\r\n        <Box sx={{ my: 2 }}>\r\n          <Typography variant='subtitle2' fontWeight={600}>\r\n            區域：{ticketVcList[activeTicket]?.area} 排數：{ticketVcList[activeTicket]?.line}{' '}\r\n            排　座位：{ticketVcList[activeTicket]?.seat} 號\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box\r\n          width={'100%'}\r\n          sx={{\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            display: 'flex',\r\n            position: 'relative',\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              display: 'flex',\r\n              position: 'relative',\r\n              width: 160,\r\n              height: 160,\r\n            }}\r\n          >\r\n            <Button\r\n              id='ticketQRCode'\r\n              variant='contained'\r\n              color='primary'\r\n              disabled={!ticketVcList[activeTicket]?.deeplink}\r\n              onClick={() => {\r\n                const authUri = ticketVcList[activeTicket]?.deeplink;\r\n                if (authUri) {\r\n                  window.location.href = authUri;\r\n                }\r\n              }}\r\n            >\r\n              加入數位憑證皮夾 App\r\n            </Button>\r\n            {/* <img\r\n            src={ticketVcList[activeTicket]?.qrcode}\r\n            alt=\"QR Code\"\r\n            style={{\r\n              width: 160,\r\n              height: 160,\r\n              borderRadius: 12,\r\n              border: '1px solid #eee',\r\n            }}\r\n          /> */}\r\n\r\n            {ticketVcList[activeTicket]?.isScanned && (\r\n              <Box\r\n                sx={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  bgcolor: 'rgba(255, 255, 255, 0.6)',\r\n                  borderRadius: 2,\r\n                }}\r\n              >\r\n                <Box\r\n                  sx={{\r\n                    width: 120,\r\n                    height: 120,\r\n                    borderRadius: '50%',\r\n                    border: '5px solid #d32f2f',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    transform: 'rotate(-15deg)',\r\n                    opacity: 0.9,\r\n                  }}\r\n                >\r\n                  <Typography\r\n                    variant='h6'\r\n                    sx={{\r\n                      color: '#d32f2f',\r\n                      fontWeight: 700,\r\n                      letterSpacing: 2,\r\n                    }}\r\n                  >\r\n                    已加入數位憑證皮夾\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        </Box>\r\n\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            mt: 1,\r\n          }}\r\n        >\r\n          <Button\r\n            variant='contained'\r\n            startIcon={<LuArrowLeft />}\r\n            onClick={handlePrev}\r\n            disabled={activeTicket === 0}\r\n          >\r\n            上一張\r\n          </Button>\r\n\r\n          <Typography variant='body2' sx={{ minWidth: 60, textAlign: 'center', color: '#555' }}>\r\n            {ticketVcList.length > 0 ? `${activeTicket + 1} / ${ticketVcList.length}` : '- / -'}\r\n          </Typography>\r\n\r\n          <Button\r\n            id='navNext'\r\n            variant='contained'\r\n            endIcon={<LuArrowRight />}\r\n            onClick={handleNext}\r\n            disabled={activeTicket === ticketVcList.length - 1 || ticketVcList.length === 0}\r\n          >\r\n            下一張\r\n          </Button>\r\n        </Box>\r\n      </DialogContent>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <DialogContent sx={{ textAlign: 'center' }}>\r\n        <Typography variant='h6' fontWeight={700} sx={{ mb: 1 }}>\r\n          您的票券已準備好！\r\n        </Typography>\r\n\r\n        <Typography variant='body2' sx={{ color: '#555', mb: 1 }}>\r\n          請使用數位憑證皮夾 App 掃描 QR Code 完成綁定\r\n        </Typography>\r\n\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            bgcolor: '#fff8e1',\r\n            color: '#b26a00',\r\n            borderRadius: 2,\r\n            p: 1,\r\n            mb: 2,\r\n          }}\r\n        >\r\n          <WarningAmberIcon sx={{ mr: 1 }} />\r\n          <Typography variant='body2' fontWeight={600}>\r\n            請於 5 分鐘內完成掃描，否則 QR Code 將失效\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box sx={{ mb: 2 }}>\r\n          <Typography variant='subtitle2' fontWeight={600}>\r\n            區域：{ticketVcList[activeTicket]?.area} 排數：{ticketVcList[activeTicket]?.line}{' '}\r\n            排　座位：{ticketVcList[activeTicket]?.seat} 號\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box\r\n          sx={{\r\n            position: 'relative',\r\n            display: 'inline-block',\r\n          }}\r\n        >\r\n          <img\r\n            src={ticketVcList[activeTicket]?.qrcode}\r\n            alt='QR Code'\r\n            style={{\r\n              width: 160,\r\n              height: 160,\r\n              borderRadius: 12,\r\n              border: '1px solid #eee',\r\n            }}\r\n          />\r\n\r\n          {ticketVcList[activeTicket]?.isScanned && (\r\n            <Box\r\n              sx={{\r\n                position: 'absolute',\r\n                top: 0,\r\n                left: 0,\r\n                width: '100%',\r\n                height: '100%',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                bgcolor: 'rgba(255, 255, 255, 0.6)',\r\n                borderRadius: 2,\r\n              }}\r\n            >\r\n              <Box\r\n                sx={{\r\n                  width: 120,\r\n                  height: 120,\r\n                  borderRadius: '50%',\r\n                  border: '5px solid #d32f2f',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  transform: 'rotate(-15deg)',\r\n                  opacity: 0.9,\r\n                }}\r\n              >\r\n                <Typography\r\n                  variant='h6'\r\n                  sx={{\r\n                    color: '#d32f2f',\r\n                    fontWeight: 700,\r\n                    letterSpacing: 2,\r\n                  }}\r\n                >\r\n                  已掃描\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            gap: 2,\r\n            mt: 1,\r\n          }}\r\n        >\r\n          <Button\r\n            variant='contained'\r\n            startIcon={<LuArrowLeft />}\r\n            onClick={handlePrev}\r\n            disabled={activeTicket === 0}\r\n          >\r\n            上一張\r\n          </Button>\r\n\r\n          <Typography variant='body2' sx={{ minWidth: 60, textAlign: 'center', color: '#555' }}>\r\n            {ticketVcList.length > 0 ? `${activeTicket + 1} / ${ticketVcList.length}` : '- / -'}\r\n          </Typography>\r\n\r\n          <Button\r\n            variant='contained'\r\n            endIcon={<LuArrowRight />}\r\n            onClick={handleNext}\r\n            disabled={activeTicket === ticketVcList.length - 1 || ticketVcList.length === 0}\r\n          >\r\n            下一張\r\n          </Button>\r\n        </Box>\r\n      </DialogContent>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 625, "column": 0}, "map": {"version":3,"sources":["file:///Users/iris/Desktop/1117/TicketBox_2025/frontend/src/components/Tour/BubbleStep.jsx"],"sourcesContent":["import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport Popper from '@mui/material/Popper';\r\nimport Paper from '@mui/material/Paper';\r\n\r\nconst Arrow = styled('span')(({ placement }) => ({\r\n  position: 'absolute',\r\n  width: 0,\r\n  height: 0,\r\n  ...(placement === 'top' && {\r\n    bottom: -10,\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    borderLeft: '8px solid transparent',\r\n    borderRight: '8px solid transparent',\r\n    borderTop: '10px solid #fff',\r\n  }),\r\n  ...(placement === 'bottom' && {\r\n    top: -10,\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    borderLeft: '8px solid transparent',\r\n    borderRight: '8px solid transparent',\r\n    borderBottom: '10px solid #fff',\r\n  }),\r\n}));\r\n\r\nexport default function BubbleStep({ anchorEl, placement = 'top', title, text, children, open }) {\r\n  return (\r\n    <Popper\r\n      open={open}\r\n      anchorEl={anchorEl}\r\n      placement={placement}\r\n      modifiers={[\r\n        {\r\n          name: 'offset',\r\n          options: { offset: [0, 10] }, // 氣泡距離目標 10px\r\n        },\r\n      ]}\r\n      sx={{ zIndex: 9999 }}\r\n    >\r\n      <Paper\r\n        sx={{\r\n          padding: '16px',\r\n          width: 260,\r\n          borderRadius: '12px',\r\n          boxShadow: '0 4px 18px rgba(0,0,0,0.25)',\r\n          position: 'relative',\r\n        }}\r\n      >\r\n        <Arrow placement={placement} />\r\n\r\n        <strong>{title}</strong>\r\n        <p style={{ fontSize: 14, marginTop: 4 }}>{text}</p>\r\n\r\n        <div style={{ marginTop: 12 }}>{children}</div>\r\n      </Paper>\r\n    </Popper>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,QAAQ,IAAA,yMAAM,EAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,GAAK,CAAC;QAC/C,UAAU;QACV,OAAO;QACP,QAAQ;QACR,GAAI,cAAc,SAAS;YACzB,QAAQ,CAAC;YACT,MAAM;YACN,WAAW;YACX,YAAY;YACZ,aAAa;YACb,WAAW;QACb,CAAC;QACD,GAAI,cAAc,YAAY;YAC5B,KAAK,CAAC;YACN,MAAM;YACN,WAAW;YACX,YAAY;YACZ,aAAa;YACb,cAAc;QAChB,CAAC;IACH,CAAC;AAEc,SAAS,WAAW,EAAE,QAAQ,EAAE,YAAY,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC7F,qBACE,8OAAC,uKAAM;QACL,MAAM;QACN,UAAU;QACV,WAAW;QACX,WAAW;YACT;gBACE,MAAM;gBACN,SAAS;oBAAE,QAAQ;wBAAC;wBAAG;qBAAG;gBAAC;YAC7B;SACD;QACD,IAAI;YAAE,QAAQ;QAAK;kBAEnB,cAAA,8OAAC,qKAAK;YACJ,IAAI;gBACF,SAAS;gBACT,OAAO;gBACP,cAAc;gBACd,WAAW;gBACX,UAAU;YACZ;;8BAEA,8OAAC;oBAAM,WAAW;;;;;;8BAElB,8OAAC;8BAAQ;;;;;;8BACT,8OAAC;oBAAE,OAAO;wBAAE,UAAU;wBAAI,WAAW;oBAAE;8BAAI;;;;;;8BAE3C,8OAAC;oBAAI,OAAO;wBAAE,WAAW;oBAAG;8BAAI;;;;;;;;;;;;;;;;;AAIxC","debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///Users/iris/Desktop/1117/TicketBox_2025/frontend/src/components/Tour/BubbleTour.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { styled } from '@mui/system';\r\nimport BubbleStep from './BubbleStep';\r\n\r\nconst Mask = styled('div')({\r\n  position: 'fixed',\r\n  inset: 0,\r\n  // background: 'rgba(0,0,0,0.45)',\r\n  // backdropFilter: 'blur(2px)',\r\n  zIndex: 9990,\r\n});\r\n\r\nconst StepDots = styled('div')({\r\n  position: 'fixed',\r\n  bottom: 40,\r\n  width: '100%',\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  zIndex: 10000,\r\n});\r\n\r\nconst Dot = styled('div')(({ active }) => ({\r\n  width: 8,\r\n  height: 8,\r\n  borderRadius: '50%',\r\n  margin: '0 6px',\r\n  background: active ? '#6A4DFF' : '#ccc',\r\n}));\r\n\r\nexport default function BubbleTour({ open, steps, onClose }) {\r\n  const [index, setIndex] = useState(0);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    setIndex(0);\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const el = document.querySelector(steps[index].target);\r\n    setAnchorEl(el);\r\n  }, [index, open, steps]);\r\n\r\n  if (!open) return null;\r\n\r\n  const step = steps[index];\r\n\r\n  return (\r\n    <>\r\n      <Mask onClick={onClose} />\r\n\r\n      <BubbleStep\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        placement={step.position || 'top'}\r\n        title={step.title}\r\n        text={step.text}\r\n      >\r\n        {/* buttons */}\r\n        <div style={{ display: 'flex', gap: 8 }}>\r\n          {index > 0 && (\r\n            <button\r\n              style={{\r\n                flex: 1,\r\n                padding: '10px',\r\n                borderRadius: 8,\r\n                border: '1px solid #ccc',\r\n                background: '#f5f5f5',\r\n              }}\r\n              onClick={() => setIndex(index - 1)}\r\n            >\r\n              上一步\r\n            </button>\r\n          )}\r\n          <button\r\n            style={{\r\n              flex: 1,\r\n              padding: '10px',\r\n              borderRadius: 8,\r\n              background: '#6A4DFF',\r\n              color: '#fff',\r\n              border: 'none',\r\n            }}\r\n            onClick={() => (index === steps.length - 1 ? onClose() : setIndex(index + 1))}\r\n          >\r\n            {index === steps.length - 1 ? '完成' : '下一步'}\r\n          </button>\r\n        </div>\r\n      </BubbleStep>\r\n\r\n      <StepDots>\r\n        {steps.map((_, i) => (\r\n          <Dot key={i} active={i === index} />\r\n        ))}\r\n      </StepDots>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,OAAO,IAAA,yMAAM,EAAC,OAAO;IACzB,UAAU;IACV,OAAO;IACP,kCAAkC;IAClC,+BAA+B;IAC/B,QAAQ;AACV;AAEA,MAAM,WAAW,IAAA,yMAAM,EAAC,OAAO;IAC7B,UAAU;IACV,QAAQ;IACR,OAAO;IACP,SAAS;IACT,gBAAgB;IAChB,QAAQ;AACV;AAEA,MAAM,MAAM,IAAA,yMAAM,EAAC,OAAO,CAAC,EAAE,MAAM,EAAE,GAAK,CAAC;QACzC,OAAO;QACP,QAAQ;QACR,cAAc;QACd,QAAQ;QACR,YAAY,SAAS,YAAY;IACnC,CAAC;AAEc,SAAS,WAAW,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;IACzD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;QACX,SAAS;IACX,GAAG;QAAC;KAAK;IAET,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;QACX,MAAM,KAAK,SAAS,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM;QACrD,YAAY;IACd,GAAG;QAAC;QAAO;QAAM;KAAM;IAEvB,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,OAAO,KAAK,CAAC,MAAM;IAEzB,qBACE;;0BACE,8OAAC;gBAAK,SAAS;;;;;;0BAEf,8OAAC,mJAAU;gBACT,MAAM;gBACN,UAAU;gBACV,WAAW,KAAK,QAAQ,IAAI;gBAC5B,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,IAAI;0BAGf,cAAA,8OAAC;oBAAI,OAAO;wBAAE,SAAS;wBAAQ,KAAK;oBAAE;;wBACnC,QAAQ,mBACP,8OAAC;4BACC,OAAO;gCACL,MAAM;gCACN,SAAS;gCACT,cAAc;gCACd,QAAQ;gCACR,YAAY;4BACd;4BACA,SAAS,IAAM,SAAS,QAAQ;sCACjC;;;;;;sCAIH,8OAAC;4BACC,OAAO;gCACL,MAAM;gCACN,SAAS;gCACT,cAAc;gCACd,YAAY;gCACZ,OAAO;gCACP,QAAQ;4BACV;4BACA,SAAS,IAAO,UAAU,MAAM,MAAM,GAAG,IAAI,YAAY,SAAS,QAAQ;sCAEzE,UAAU,MAAM,MAAM,GAAG,IAAI,OAAO;;;;;;;;;;;;;;;;;0BAK3C,8OAAC;0BACE,MAAM,GAAG,CAAC,CAAC,GAAG,kBACb,8OAAC;wBAAY,QAAQ,MAAM;uBAAjB;;;;;;;;;;;;AAKpB","debugId":null}},
    {"offset": {"line": 876, "column": 0}, "map": {"version":3,"sources":["file:///Users/iris/Desktop/1117/TicketBox_2025/frontend/src/app/%5Blang%5D/paymentSuccess/page.jsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname, useParams } from 'next/navigation';\r\nimport MenuBookIcon from '@mui/icons-material/MenuBook';\r\n\r\nimport {\r\n  Box,\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Grid,\r\n  Divider,\r\n  Chip,\r\n  Stack,\r\n  CardMedia,\r\n  Button,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Card,\r\n  CardContent,\r\n  Avatar,\r\n  Dialog,\r\n  DialogActions,\r\n} from '@mui/material';\r\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\r\nimport EventIcon from '@mui/icons-material/Event';\r\nimport AccessTimeIcon from '@mui/icons-material/AccessTime';\r\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\r\nimport ConfirmationNumberIcon from '@mui/icons-material/ConfirmationNumber';\r\nimport CreditCardIcon from '@mui/icons-material/CreditCard';\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport QrCode2Icon from '@mui/icons-material/QrCode2';\r\nimport DirectionsWalkIcon from '@mui/icons-material/DirectionsWalk';\r\nimport CountdownTimer from '@/components/CountdownTimer';\r\nimport { useI18n } from '@/context/i18nContext';\r\nimport { useAppDispatch, useAppSelector } from '@/lib/store';\r\nimport { setBuyInfo } from '@/lib/features/globalSlice';\r\nimport TestQR from '@/components/TestQR';\r\nimport BubbleTour from '@/components/Tour/BubbleTour';\r\nimport {\r\n  LuCalendarDays,\r\n  LuTimer,\r\n  LuMapPin,\r\n  LuTicket,\r\n  LuPlus,\r\n  LuMinus,\r\n  LuHouse,\r\n  LuArrowLeft,\r\n  LuArrowRight,\r\n} from 'react-icons/lu';\r\nimport { useIsMobile } from '@/hook/useIsMobile';\r\n\r\nconst InfoRow = ({ label, value }) => (\r\n  <Grid container alignItems=\"center\" sx={{ py: 0.75 }}>\r\n    <Grid size={{ xs: 4, md: 3 }}>\r\n      <Typography variant=\"body2\" color=\"text.secondary\">\r\n        {label}\r\n      </Typography>\r\n    </Grid>\r\n    <Grid size={{ xs: 8, md: 9 }}>\r\n      <Typography variant=\"body2\" component=\"div\" sx={{ fontWeight: 600 }}>\r\n        {value}\r\n      </Typography>\r\n    </Grid>\r\n  </Grid>\r\n);\r\n\r\nexport default function TicketSuccessPage() {\r\n  const dispatch = useAppDispatch();\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n  const lang = pathname.split('/')[1] || 'en';\r\n  const t = useI18n();\r\n  const isMobile = useIsMobile();\r\n  const params = useParams();\r\n  const { buyInfo } = useAppSelector((state) => state.global);\r\n  // const [time, setTime] = useState('');\r\n  const [tourOpen, setTourOpen] = useState(false);\r\n  const [ticketVcList, setTicketVcList] = useState([]);\r\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\r\n\r\n  /* useEffect(() => {\r\n    if (typeof window !== 'undefined' && (!buyInfo || buyInfo.ticketList.length === 0)) {\r\n      const storedBuyInfo = sessionStorage.getItem('buyInfo');\r\n      if (storedBuyInfo) {\r\n        dispatch(setBuyInfo(JSON.parse(storedBuyInfo)));\r\n      }\r\n    }\r\n  }, [dispatch]); */\r\n\r\n  const steps = [\r\n    {\r\n      target: '#ticketQRCode',\r\n      title: '加入數位憑證皮夾 App',\r\n      text: '點擊即可將此票券加入您的數位票券錢包，方便隨時出示。',\r\n      position: 'top',\r\n    },\r\n    {\r\n      target: '#navNext',\r\n      title: '下一張票',\r\n      text: '若您的訂單有多張票，可從這裡切換依序加入皮夾。',\r\n      position: 'bottom',\r\n    },\r\n  ];\r\n\r\n  const grandTotal = buyInfo?.ticketList.reduce((sum, t) => sum + t.price, 0);\r\n  const totalQty = buyInfo.ticketList.reduce((sum, t) => sum + t.qty, 0);\r\n\r\n  // --- 1️⃣ 送驗證碼，回傳 message ---\r\n  const sendVerifyCode = async (orderId, email) => {\r\n    const res = await fetch('/api/concert/sendVerifyCode', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ orderId, email }),\r\n    });\r\n    const data = await res.json();\r\n    console.log('sendVerifyCode:', data.message);\r\n    return data.message;\r\n  };\r\n\r\n  // --- 2️⃣ 取得 QR Code ---\r\n  const getVcQrcode = async (id) => {\r\n    const res = await fetch(`/api/concert/getVcQrcode?id=${id}`, {\r\n      method: 'GET',\r\n      headers: { 'Content-Type': 'application/json' },\r\n    });\r\n    const data = await res.json();\r\n    console.log('getVcQrcode:', data);\r\n    return data.ticketVcDTOList || [];\r\n  };\r\n\r\n  // --- 3️⃣ 處理全部 email ---\r\n  const processAllEmails = async (orderId, ticketList) => {\r\n    const uniqueEmails = Array.from(new Set(ticketList.map((t) => t.email)));\r\n\r\n    const allVcResults = [];\r\n    for (const email of uniqueEmails) {\r\n      try {\r\n        const message = await sendVerifyCode(orderId, email);\r\n        const vcList = await getVcQrcode(message);\r\n        allVcResults.push(...vcList); // 合併結果\r\n      } catch (error) {\r\n        console.error(`Error processing email ${email}:`, error);\r\n      }\r\n    }\r\n    return allVcResults;\r\n  };\r\n\r\n  // --- 4️⃣ onReceiveClick ---\r\n  const onReceiveClick = async () => {\r\n    if (!buyInfo?.ticketList) return;\r\n\r\n    setDialogIsOpen(true);\r\n\r\n    try {\r\n      const allVcList = await processAllEmails(buyInfo.orderId, buyInfo.ticketList);\r\n      setTicketVcList(allVcList);\r\n    } catch (error) {\r\n      console.error('Error processing tickets:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <>\r\n        {/* --- 票券內容 --- */}\r\n        {/* <div id='ticketQRCode'> ... QR 圖 ... </div>\r\n        <div id='ticketPrice'> NT$ 3,000 </div>\r\n        <button id='navNext'>下一張</button> */}\r\n\r\n        {/* <button onClick={() => setTourOpen(true)}>啟動教學</button>\r\n\r\n        <BubbleTour open={tourOpen} steps={steps} onClose={() => setTourOpen(false)} /> */}\r\n      </>\r\n      <Dialog\r\n        disableEnforceFocus={false}\r\n        open={dialogIsOpen}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        slotProps={{\r\n          paper: {\r\n            sx: {\r\n              borderRadius: 3,\r\n              boxShadow: '0 8px 30px rgba(0,0,0,0.15)',\r\n            },\r\n          },\r\n        }}>\r\n        <TestQR oriTicketList={ticketVcList} />\r\n\r\n        <DialogActions\r\n          sx={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n          }}>\r\n          <Button variant=\"outlined\" sx={{ ml: 2 }} onClick={() => setTourOpen(true)}>\r\n            <MenuBookIcon />\r\n          </Button>\r\n          <Button onClick={() => setDialogIsOpen(false)}>關閉</Button>\r\n        </DialogActions>\r\n\r\n        <BubbleTour open={tourOpen} steps={steps} onClose={() => setTourOpen(false)} />\r\n\r\n        {/* <button onClick={() => setTourOpen(true)}>啟動教學</button> */}\r\n      </Dialog>\r\n\r\n      <Box\r\n        sx={{\r\n          minHeight: '100vh',\r\n          bgcolor: (t) => (t.palette.mode === 'light' ? '#f5f7fb' : 'background.default'),\r\n          py: { xs: 3, md: 6 },\r\n        }}>\r\n        <Container maxWidth=\"md\">\r\n          <Paper\r\n            elevation={0}\r\n            sx={{\r\n              overflow: 'hidden',\r\n              borderRadius: 3,\r\n              mb: 3,\r\n              border: (t) => `1px solid ${t.palette.divider}`,\r\n            }}>\r\n            <Box\r\n              sx={{\r\n                px: { xs: 3, md: 6 },\r\n                py: { xs: 5, md: 6 },\r\n                background: 'linear-gradient(135deg, #6e62ff 0%, #8358ff 40%, #a34bff 100%)',\r\n                color: 'white',\r\n                textAlign: 'center',\r\n              }}>\r\n              <Stack spacing={2} alignItems=\"center\">\r\n                <CheckCircleOutlineIcon sx={{ fontSize: 56 }} />\r\n                <Typography variant=\"h5\" sx={{ fontWeight: 800 }}>\r\n                  付款成功！\r\n                </Typography>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  訂單編號 : {buyInfo?.orderId}\r\n                </Typography>\r\n              </Stack>\r\n            </Box>\r\n\r\n            <Card\r\n              elevation={0}\r\n              sx={{\r\n                mx: { xs: 2, md: 4 },\r\n                my: 3,\r\n                borderRadius: 2,\r\n                border: (t) => `1px dashed ${t.palette.divider}`,\r\n                backgroundColor: (t) =>\r\n                  t.palette.mode === 'light' ? '#fafbff' : 'background.paper',\r\n              }}>\r\n              <CardContent>\r\n                <Grid container alignItems=\"center\">\r\n                  <Grid size={{ xs: 12 }}>\r\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                      {buyInfo.concertInfo?.title}\r\n                    </Typography>\r\n\r\n                    {buyInfo.info?.map((item, index) =>\r\n                      index === 0 ? null : (\r\n                        <Stack direction=\"row\" spacing={2} flexWrap=\"wrap\" key={index}>\r\n                          <Box\r\n                            color=\"primary.main\"\r\n                            sx={{\r\n                              display: 'flex',\r\n                              justifyContent: 'center',\r\n                              alignItems: 'center',\r\n                            }}>\r\n                            {index === 1 && <LuCalendarDays size={20} />}\r\n                            {index === 2 && <LuTimer size={20} />}\r\n                            {index === 3 && <LuMapPin size={20} />}\r\n                          </Box>\r\n\r\n                          <Typography variant=\"body2\">{item.value}</Typography>\r\n                        </Stack>\r\n                      ),\r\n                    )}\r\n\r\n                    <Divider sx={{ my: 2 }} />\r\n\r\n                    <Grid container spacing={0.5}>\r\n                      <Grid size={{ xs: 12 }}>\r\n                        <Stack direction=\"row\" sx={{ fontWeight: 600, color: 'text.secondary' }}>\r\n                          <Typography sx={{ width: '30%' }}>票種</Typography>\r\n                          <Typography sx={{ width: '25%' }}>座位</Typography>\r\n                          <Typography sx={{ width: '45%' }}>信箱</Typography>\r\n                        </Stack>\r\n                      </Grid>\r\n\r\n                      {buyInfo.ticketList?.map((item, index) => (\r\n                        <Grid size={{ xs: 12 }} key={index}>\r\n                          <Stack direction=\"row\" alignItems=\"center\">\r\n                            <Box sx={{ width: '30%' }}>\r\n                              <Chip\r\n                                label={item.name}\r\n                                size=\"small\"\r\n                                color=\"primary\"\r\n                                variant=\"outlined\"\r\n                              />\r\n                            </Box>\r\n                            <Typography\r\n                              sx={{ width: '25%' }}\r\n                              variant=\"overline\"\r\n                              color=\"text.secondary\">\r\n                              {item.line} 排 {item.seat} 號\r\n                            </Typography>\r\n\r\n                            <Typography\r\n                              sx={{ width: '45%', textTransform: 'none' }}\r\n                              variant=\"overline\"\r\n                              color=\"text.secondary\">\r\n                              {item.email}\r\n                            </Typography>\r\n                          </Stack>\r\n                        </Grid>\r\n                      ))}\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Box sx={{ px: { xs: 3, md: 6 }, pb: 4 }}>\r\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700, mb: 1 }}>\r\n                訂單詳情\r\n              </Typography>\r\n              <Paper variant=\"outlined\" sx={{ p: { xs: 2, md: 3 }, borderRadius: 2 }}>\r\n                <InfoRow label=\"訂單編號\" value={buyInfo?.orderId} />\r\n                <InfoRow\r\n                  label=\"付款方式\"\r\n                  value={\r\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                      <CreditCardIcon fontSize=\"small\" />\r\n                      <span>信用卡（****{buyInfo?.cardLast}）</span>\r\n                    </Stack>\r\n                  }\r\n                />\r\n                <InfoRow label=\"付款時間\" value={buyInfo?.payTime} />\r\n                <Divider sx={{ my: 1 }} />\r\n                <Grid container justifyContent={'space-between'}>\r\n                  <Grid size={{ xs: 6 }}>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      總計\r\n                    </Typography>\r\n                  </Grid>\r\n                  <Grid size={{ xs: 6 }}>\r\n                    <Typography variant=\"body2\" textAlign=\"right\" fontWeight={800}>\r\n                      NT$ {grandTotal.toLocaleString()}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n              </Paper>\r\n\r\n              <Stack direction={{ xs: 'column', sm: 'row' }} spacing={1.5} mt={2}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  startIcon={<LuTicket />}\r\n                  onClick={() => onReceiveClick()}>\r\n                  領取票券\r\n                </Button>\r\n\r\n                <Button\r\n                  variant=\"contained\"\r\n                  startIcon={<LuHouse />}\r\n                  onClick={() => router.push('/')}>\r\n                  稍後領取票券並回首頁\r\n                </Button>\r\n              </Stack>\r\n            </Box>\r\n          </Paper>\r\n        </Container>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AAKA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AApDA;;;;;;;;;;;;;;;;;;;;;;;AAsDA,MAAM,UAAU,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,iBAC/B,8OAAC,mMAAI;QAAC,SAAS;QAAC,YAAW;QAAS,IAAI;YAAE,IAAI;QAAK;;0BACjD,8OAAC,mMAAI;gBAAC,MAAM;oBAAE,IAAI;oBAAG,IAAI;gBAAE;0BACzB,cAAA,8OAAC,2NAAU;oBAAC,SAAQ;oBAAQ,OAAM;8BAC/B;;;;;;;;;;;0BAGL,8OAAC,mMAAI;gBAAC,MAAM;oBAAE,IAAI;oBAAG,IAAI;gBAAE;0BACzB,cAAA,8OAAC,2NAAU;oBAAC,SAAQ;oBAAQ,WAAU;oBAAM,IAAI;wBAAE,YAAY;oBAAI;8BAC/D;;;;;;;;;;;;;;;;;AAMM,SAAS;IACtB,MAAM,WAAW,IAAA,qIAAc;IAC/B,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;IACvC,MAAM,IAAI,IAAA,yIAAO;IACjB,MAAM,WAAW,IAAA,0IAAW;IAC5B,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,qIAAc,EAAC,CAAC,QAAU,MAAM,MAAM;IAC1D,wCAAwC;IACxC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD;;;;;;;kBAOgB,GAEhB,MAAM,QAAQ;QACZ;YACE,QAAQ;YACR,OAAO;YACP,MAAM;YACN,UAAU;QACZ;QACA;YACE,QAAQ;YACR,OAAO;YACP,MAAM;YACN,UAAU;QACZ;KACD;IAED,MAAM,aAAa,SAAS,WAAW,OAAO,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;IACzE,MAAM,WAAW,QAAQ,UAAU,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,GAAG,EAAE;IAEpE,8BAA8B;IAC9B,MAAM,iBAAiB,OAAO,SAAS;QACrC,MAAM,MAAM,MAAM,MAAM,+BAA+B;YACrD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAS;YAAM;QACxC;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC,mBAAmB,KAAK,OAAO;QAC3C,OAAO,KAAK,OAAO;IACrB;IAEA,yBAAyB;IACzB,MAAM,cAAc,OAAO;QACzB,MAAM,MAAM,MAAM,MAAM,CAAC,4BAA4B,EAAE,IAAI,EAAE;YAC3D,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC,gBAAgB;QAC5B,OAAO,KAAK,eAAe,IAAI,EAAE;IACnC;IAEA,yBAAyB;IACzB,MAAM,mBAAmB,OAAO,SAAS;QACvC,MAAM,eAAe,MAAM,IAAI,CAAC,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK;QAErE,MAAM,eAAe,EAAE;QACvB,KAAK,MAAM,SAAS,aAAc;YAChC,IAAI;gBACF,MAAM,UAAU,MAAM,eAAe,SAAS;gBAC9C,MAAM,SAAS,MAAM,YAAY;gBACjC,aAAa,IAAI,IAAI,SAAS,OAAO;YACvC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC,EAAE;YACpD;QACF;QACA,OAAO;IACT;IAEA,6BAA6B;IAC7B,MAAM,iBAAiB;QACrB,IAAI,CAAC,SAAS,YAAY;QAE1B,gBAAgB;QAEhB,IAAI;YACF,MAAM,YAAY,MAAM,iBAAiB,QAAQ,OAAO,EAAE,QAAQ,UAAU;YAC5E,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACF;IAEA,qBACE;;0BACE;0BAUA,8OAAC,2MAAM;gBACL,qBAAqB;gBACrB,MAAM;gBACN,UAAS;gBACT,SAAS;gBACT,WAAW;oBACT,OAAO;wBACL,IAAI;4BACF,cAAc;4BACd,WAAW;wBACb;oBACF;gBACF;;kCACA,8OAAC,gJAAM;wBAAC,eAAe;;;;;;kCAEvB,8OAAC,uOAAa;wBACZ,IAAI;4BACF,SAAS;4BACT,gBAAgB;4BAChB,YAAY;wBACd;;0CACA,8OAAC,2MAAM;gCAAC,SAAQ;gCAAW,IAAI;oCAAE,IAAI;gCAAE;gCAAG,SAAS,IAAM,YAAY;0CACnE,cAAA,8OAAC,wKAAY;;;;;;;;;;0CAEf,8OAAC,2MAAM;gCAAC,SAAS,IAAM,gBAAgB;0CAAQ;;;;;;;;;;;;kCAGjD,8OAAC,mJAAU;wBAAC,MAAM;wBAAU,OAAO;wBAAO,SAAS,IAAM,YAAY;;;;;;;;;;;;0BAKvE,8OAAC,+LAAG;gBACF,IAAI;oBACF,WAAW;oBACX,SAAS,CAAC,IAAO,EAAE,OAAO,CAAC,IAAI,KAAK,UAAU,YAAY;oBAC1D,IAAI;wBAAE,IAAI;wBAAG,IAAI;oBAAE;gBACrB;0BACA,cAAA,8OAAC,uNAAS;oBAAC,UAAS;8BAClB,cAAA,8OAAC,uMAAK;wBACJ,WAAW;wBACX,IAAI;4BACF,UAAU;4BACV,cAAc;4BACd,IAAI;4BACJ,QAAQ,CAAC,IAAM,CAAC,UAAU,EAAE,EAAE,OAAO,CAAC,OAAO,EAAE;wBACjD;;0CACA,8OAAC,+LAAG;gCACF,IAAI;oCACF,IAAI;wCAAE,IAAI;wCAAG,IAAI;oCAAE;oCACnB,IAAI;wCAAE,IAAI;wCAAG,IAAI;oCAAE;oCACnB,YAAY;oCACZ,OAAO;oCACP,WAAW;gCACb;0CACA,cAAA,8OAAC,uMAAK;oCAAC,SAAS;oCAAG,YAAW;;sDAC5B,8OAAC,kLAAsB;4CAAC,IAAI;gDAAE,UAAU;4CAAG;;;;;;sDAC3C,8OAAC,2NAAU;4CAAC,SAAQ;4CAAK,IAAI;gDAAE,YAAY;4CAAI;sDAAG;;;;;;sDAGlD,8OAAC,2NAAU;4CAAC,SAAQ;4CAAK,YAAY;;gDAAC;gDAC5B,SAAS;;;;;;;;;;;;;;;;;;0CAKvB,8OAAC,mMAAI;gCACH,WAAW;gCACX,IAAI;oCACF,IAAI;wCAAE,IAAI;wCAAG,IAAI;oCAAE;oCACnB,IAAI;oCACJ,cAAc;oCACd,QAAQ,CAAC,IAAM,CAAC,WAAW,EAAE,EAAE,OAAO,CAAC,OAAO,EAAE;oCAChD,iBAAiB,CAAC,IAChB,EAAE,OAAO,CAAC,IAAI,KAAK,UAAU,YAAY;gCAC7C;0CACA,cAAA,8OAAC,+NAAW;8CACV,cAAA,8OAAC,mMAAI;wCAAC,SAAS;wCAAC,YAAW;kDACzB,cAAA,8OAAC,mMAAI;4CAAC,MAAM;gDAAE,IAAI;4CAAG;;8DACnB,8OAAC,2NAAU;oDAAC,SAAQ;oDAAY,OAAM;oDAAiB,YAAY;8DAChE,QAAQ,WAAW,EAAE;;;;;;gDAGvB,QAAQ,IAAI,EAAE,IAAI,CAAC,MAAM,QACxB,UAAU,IAAI,qBACZ,8OAAC,uMAAK;wDAAC,WAAU;wDAAM,SAAS;wDAAG,UAAS;;0EAC1C,8OAAC,+LAAG;gEACF,OAAM;gEACN,IAAI;oEACF,SAAS;oEACT,gBAAgB;oEAChB,YAAY;gEACd;;oEACC,UAAU,mBAAK,8OAAC,gKAAc;wEAAC,MAAM;;;;;;oEACrC,UAAU,mBAAK,8OAAC,yJAAO;wEAAC,MAAM;;;;;;oEAC9B,UAAU,mBAAK,8OAAC,0JAAQ;wEAAC,MAAM;;;;;;;;;;;;0EAGlC,8OAAC,2NAAU;gEAAC,SAAQ;0EAAS,KAAK,KAAK;;;;;;;uDAbe;;;;;8DAkB5D,8OAAC,+MAAO;oDAAC,IAAI;wDAAE,IAAI;oDAAE;;;;;;8DAErB,8OAAC,mMAAI;oDAAC,SAAS;oDAAC,SAAS;;sEACvB,8OAAC,mMAAI;4DAAC,MAAM;gEAAE,IAAI;4DAAG;sEACnB,cAAA,8OAAC,uMAAK;gEAAC,WAAU;gEAAM,IAAI;oEAAE,YAAY;oEAAK,OAAO;gEAAiB;;kFACpE,8OAAC,2NAAU;wEAAC,IAAI;4EAAE,OAAO;wEAAM;kFAAG;;;;;;kFAClC,8OAAC,2NAAU;wEAAC,IAAI;4EAAE,OAAO;wEAAM;kFAAG;;;;;;kFAClC,8OAAC,2NAAU;wEAAC,IAAI;4EAAE,OAAO;wEAAM;kFAAG;;;;;;;;;;;;;;;;;wDAIrC,QAAQ,UAAU,EAAE,IAAI,CAAC,MAAM,sBAC9B,8OAAC,mMAAI;gEAAC,MAAM;oEAAE,IAAI;gEAAG;0EACnB,cAAA,8OAAC,uMAAK;oEAAC,WAAU;oEAAM,YAAW;;sFAChC,8OAAC,+LAAG;4EAAC,IAAI;gFAAE,OAAO;4EAAM;sFACtB,cAAA,8OAAC,mMAAI;gFACH,OAAO,KAAK,IAAI;gFAChB,MAAK;gFACL,OAAM;gFACN,SAAQ;;;;;;;;;;;sFAGZ,8OAAC,2NAAU;4EACT,IAAI;gFAAE,OAAO;4EAAM;4EACnB,SAAQ;4EACR,OAAM;;gFACL,KAAK,IAAI;gFAAC;gFAAI,KAAK,IAAI;gFAAC;;;;;;;sFAG3B,8OAAC,2NAAU;4EACT,IAAI;gFAAE,OAAO;gFAAO,eAAe;4EAAO;4EAC1C,SAAQ;4EACR,OAAM;sFACL,KAAK,KAAK;;;;;;;;;;;;+DArBY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAgCzC,8OAAC,+LAAG;gCAAC,IAAI;oCAAE,IAAI;wCAAE,IAAI;wCAAG,IAAI;oCAAE;oCAAG,IAAI;gCAAE;;kDACrC,8OAAC,2NAAU;wCAAC,SAAQ;wCAAY,IAAI;4CAAE,YAAY;4CAAK,IAAI;wCAAE;kDAAG;;;;;;kDAGhE,8OAAC,uMAAK;wCAAC,SAAQ;wCAAW,IAAI;4CAAE,GAAG;gDAAE,IAAI;gDAAG,IAAI;4CAAE;4CAAG,cAAc;wCAAE;;0DACnE,8OAAC;gDAAQ,OAAM;gDAAO,OAAO,SAAS;;;;;;0DACtC,8OAAC;gDACC,OAAM;gDACN,qBACE,8OAAC,uMAAK;oDAAC,WAAU;oDAAM,SAAS;oDAAG,YAAW;;sEAC5C,8OAAC,0KAAc;4DAAC,UAAS;;;;;;sEACzB,8OAAC;;gEAAK;gEAAS,SAAS;gEAAS;;;;;;;;;;;;;;;;;;0DAIvC,8OAAC;gDAAQ,OAAM;gDAAO,OAAO,SAAS;;;;;;0DACtC,8OAAC,+MAAO;gDAAC,IAAI;oDAAE,IAAI;gDAAE;;;;;;0DACrB,8OAAC,mMAAI;gDAAC,SAAS;gDAAC,gBAAgB;;kEAC9B,8OAAC,mMAAI;wDAAC,MAAM;4DAAE,IAAI;wDAAE;kEAClB,cAAA,8OAAC,2NAAU;4DAAC,SAAQ;4DAAQ,OAAM;sEAAiB;;;;;;;;;;;kEAIrD,8OAAC,mMAAI;wDAAC,MAAM;4DAAE,IAAI;wDAAE;kEAClB,cAAA,8OAAC,2NAAU;4DAAC,SAAQ;4DAAQ,WAAU;4DAAQ,YAAY;;gEAAK;gEACxD,WAAW,cAAc;;;;;;;;;;;;;;;;;;;;;;;;kDAMtC,8OAAC,uMAAK;wCAAC,WAAW;4CAAE,IAAI;4CAAU,IAAI;wCAAM;wCAAG,SAAS;wCAAK,IAAI;;0DAC/D,8OAAC,2MAAM;gDACL,SAAQ;gDACR,yBAAW,8OAAC,0JAAQ;;;;;gDACpB,SAAS,IAAM;0DAAkB;;;;;;0DAInC,8OAAC,2MAAM;gDACL,SAAQ;gDACR,yBAAW,8OAAC,yJAAO;;;;;gDACnB,SAAS,IAAM,OAAO,IAAI,CAAC;0DAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUnD","debugId":null}}]
}